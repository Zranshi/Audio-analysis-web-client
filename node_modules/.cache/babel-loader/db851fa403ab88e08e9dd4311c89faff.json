{"remainingRequest":"/Users/Rs/Documents/code/Github/myRepositories/Audio-analysis-web-client/node_modules/babel-loader/lib/index.js!/Users/Rs/Documents/code/Github/myRepositories/Audio-analysis-web-client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Rs/Documents/code/Github/myRepositories/Audio-analysis-web-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Rs/Documents/code/Github/myRepositories/Audio-analysis-web-client/src/views/home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Rs/Documents/code/Github/myRepositories/Audio-analysis-web-client/src/views/home.vue","mtime":1611130378352},{"path":"/Users/Rs/Documents/code/Github/myRepositories/Audio-analysis-web-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Rs/Documents/code/Github/myRepositories/Audio-analysis-web-client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Rs/Documents/code/Github/myRepositories/Audio-analysis-web-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Rs/Documents/code/Github/myRepositories/Audio-analysis-web-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL1JzL0RvY3VtZW50cy9jb2RlL0dpdGh1Yi9teVJlcG9zaXRvcmllcy9BdWRpby1hbmFseXNpcy13ZWItY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFdhdmVmb3JtIGZyb20gIkAvY29tcG9uZW50cy93YXZlZm9ybSI7CmltcG9ydCBTcGVjdHJvZ3JhbSBmcm9tICJAL2NvbXBvbmVudHMvc3BlY3Ryb2dyYW0iOwppbXBvcnQgeyBzaG93X2RhdGEgfSBmcm9tICdAL2FwaS9kYXRhJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVcGxvYWQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDmlofku7bkuIrkvKDliJfooagKICAgICAgZmlsZURpY3Q6IHt9LAogICAgICAvLyDljZXpgInmoYYKICAgICAgcmFkaW86ICcxJywKICAgICAgLy8g5paH5Lu25L+h5oGvCiAgICAgIGF1ZGlvX3Bhcm1hczogW10sCiAgICAgIC8vIOazouW9ouWbvgogICAgICB4OiBbXSwKICAgICAgd2F2ZV9kYXRhX2w6IFtdLAogICAgICB3YXZlX2RhdGFfcjogW10sCiAgICAgIC8vIOmikeiwseWbvgogICAgICBmcmVxOiBbXSwKICAgICAgeGZwOiBbXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgICJ3YXZlZm9ybSI6IFdhdmVmb3JtLAogICAgInNwZWN0cm9ncmFtIjogU3BlY3Ryb2dyYW0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldF9kYXRhOiBmdW5jdGlvbiBnZXRfZGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBzaG93X2RhdGEoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHJlcyA9IHJlc1snZGF0YSddOyAvLyB3YXbpn7PpopHmlofku7bkv6Hmga/pg6jliIYKCiAgICAgICAgICAgICAgICBfdGhpcy5hdWRpb19wYXJtYXMgPSByZXNbJ2F1ZGlvX3BhcmFtcyddOyAvLyDms6LlvaLlm77pg6jliIYKCiAgICAgICAgICAgICAgICBfdGhpcy53YXZlX2RhdGFfbCA9IHJlc1snZGF0YSddWzBdOwogICAgICAgICAgICAgICAgX3RoaXMud2F2ZV9kYXRhX3IgPSByZXNbJ2RhdGEnXVsxXTsKICAgICAgICAgICAgICAgIF90aGlzLnggPSByZXNbJ3RpbWUnXTsgLy8g6aKR6LCx5Zu+6YOo5YiGCgogICAgICAgICAgICAgICAgX3RoaXMueGZwID0gcmVzWyd4ZnAnXTsKICAgICAgICAgICAgICAgIF90aGlzLmZyZXEgPSByZXNbJ2ZyZXEnXTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBiZWZvcmVfdXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVfdXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzTWF2ID0gZmlsZS50eXBlID09PSAnYXVkaW8veC13YXYnIHx8IGZpbGUudHlwZSA9PT0gJ2F1ZGlvL3dhdic7CiAgICAgIHZhciBpc0x0MzBNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAzMDsKICAgICAgdmFyIGlzTnVtID0gT2JqZWN0LmtleXModGhpcy5maWxlRGljdCkubGVuZ3RoIDwgMTsKCiAgICAgIGlmICghaXNNYXYpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDmlofku7blj6rog73mmK93YXbpn7PpopHmlofku7bmoLzlvI/vvIEnKTsKICAgICAgfSBlbHNlIGlmICghaXNMdDMwTSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+acgOWkp+S4iuS8oDMwTULlpKflsI/nmoTmlofku7bvvIEnKTsKICAgICAgfSBlbHNlIGlmICghaXNOdW0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCJcdTY3MDBcdTU5MUFcdTRFMEFcdTRGMjAgMSBcdTRFMkFcdTY1ODdcdTRFRjYiKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzTWF2ICYmIGlzTHQzME0gJiYgaXNOdW07CiAgICB9LAogICAgaGFuZGxlX3JlbW92ZTogZnVuY3Rpb24gaGFuZGxlX3JlbW92ZShmaWxlKSB7CiAgICAgIGRlbGV0ZSB0aGlzLmZpbGVEaWN0WyIiLmNvbmNhdChmaWxlLm5hbWUpXTsKICAgIH0sCiAgICBoYW5kbGVfc3VjY2VzczogZnVuY3Rpb24gaGFuZGxlX3N1Y2Nlc3MoZmlsZSkgewogICAgICB0aGlzLmZpbGVEaWN0WyIiLmNvbmNhdChmaWxlLm5hbWUpXSA9IGZpbGUubmFtZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA,OAAA,QAAA,MAAA,uBAAA;AACA,OAAA,WAAA,MAAA,0BAAA;AACA,SAAA,SAAA,QAAA,YAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA;AACA,MAAA,QAAA,EAAA,EAFA;AAGA;AACA,MAAA,KAAA,EAAA,GAJA;AAKA;AACA,MAAA,YAAA,EAAA,EANA;AAOA;AACA,MAAA,CAAA,EAAA,EARA;AASA,MAAA,WAAA,EAAA,EATA;AAUA,MAAA,WAAA,EAAA,EAVA;AAWA;AACA,MAAA,IAAA,EAAA,EAZA;AAaA,MAAA,GAAA,EAAA;AAbA,KAAA;AAeA,GAlBA;AAmBA,EAAA,UAAA,EAAA;AACA,gBAAA,QADA;AAEA,mBAAA;AAFA,GAnBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,SAAA,EADA;;AAAA;AACA,gBAAA,GADA;AAEA,gBAAA,GAAA,GAAA,GAAA,CAAA,MAAA,CAAA,CAFA,CAGA;;AACA,gBAAA,KAAA,CAAA,YAAA,GAAA,GAAA,CAAA,cAAA,CAAA,CAJA,CAKA;;AACA,gBAAA,KAAA,CAAA,WAAA,GAAA,GAAA,CAAA,MAAA,CAAA,CAAA,CAAA,CAAA;AACA,gBAAA,KAAA,CAAA,WAAA,GAAA,GAAA,CAAA,MAAA,CAAA,CAAA,CAAA,CAAA;AACA,gBAAA,KAAA,CAAA,CAAA,GAAA,GAAA,CAAA,MAAA,CAAA,CARA,CASA;;AACA,gBAAA,KAAA,CAAA,GAAA,GAAA,GAAA,CAAA,KAAA,CAAA;AACA,gBAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,MAAA,CAAA;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA,KAbA;AAcA,IAAA,aAdA,yBAcA,IAdA,EAcA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,IAAA,KAAA,aAAA,IAAA,IAAA,CAAA,IAAA,KAAA,WAAA;AACA,UAAA,OAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,KAAA,QAAA,EAAA,MAAA,GAAA,CAAA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,mBAAA;AACA,OAFA,MAEA,IAAA,CAAA,OAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,gBAAA;AACA,OAFA,MAEA,IAAA,CAAA,KAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA;AACA;;AACA,aAAA,KAAA,IAAA,OAAA,IAAA,KAAA;AACA,KA1BA;AA2BA,IAAA,aA3BA,yBA2BA,IA3BA,EA2BA;AACA,aAAA,KAAA,QAAA,WAAA,IAAA,CAAA,IAAA,EAAA;AACA,KA7BA;AA8BA,IAAA,cA9BA,0BA8BA,IA9BA,EA8BA;AACA,WAAA,QAAA,WAAA,IAAA,CAAA,IAAA,KAAA,IAAA,CAAA,IAAA;AACA;AAhCA;AAvBA,CAAA","sourcesContent":["<template>\n  <div class=\"home\">\n    <el-container>\n      <el-header class=\"el-header\" height=\"10\" style=\"text-align: right; font-size: 20px\">\n        <span>wit音频分析平台</span>\n      </el-header>\n\n      <el-main>\n        <el-row>\n          <el-col :span=\"5\">\n            <template>\n              <p></p>\n              <el-radio v-model=\"radio\" label=\"1\">波形图</el-radio>\n              <el-radio v-model=\"radio\" label=\"2\">频谱图</el-radio>\n            </template>\n          </el-col>\n          <el-col :span=\"14\" style=\"display: flex; justify-content: center;\">\n            <el-upload\n                class=\"upload-demo\"\n                drag\n                ref=\"upload\"\n                multiple\n                action=\"http://127.0.0.1:8000/get_wav/\"\n                name=\"file\"\n                :auto-upload=\"true\"\n                :on-remove=\"handle_remove\"\n                :before-upload=\"before_upload\"\n                :on-success=\"handle_success\"\n            >\n              <i class=\"el-icon-upload\"></i>\n              <div class=\"el-upload__text\">\n                将文件拖到此处，或<em>点击上传</em>\n              </div>\n              <div class=\"el-upload__tip\" slot=\"tip\">\n                只能上传 1 个wav文件,若要重新上传,请删除当前文件或刷新页面！\n              </div>\n            </el-upload>\n          </el-col>\n          <el-col :span=\"5\">\n            <div>\n              <el-button type=\"primary\" round @click=\"get_data\">上传文件<i class=\"el-icon-upload el-icon--right\"></i>\n              </el-button>\n            </div>\n            <br><br>\n            <div>\n              <el-card class=\"card\">\n                <b style=\"display: flex; justify-content: center\">wav文件信息</b>\n                <p>声道数量 : {{ audio_parmas[0] }}</p>\n                <p>量化位数 : {{ audio_parmas[1] }}</p>\n                <p>采样频率 : {{ audio_parmas[2] }}</p>\n                <p>采样点数 : {{ audio_parmas[3] }}</p>\n              </el-card>\n            </div>\n          </el-col>\n        </el-row>\n        <br/>\n        <div>\n          <el-card class=\"box-card\">\n            <!--波形图，横轴为时间，纵轴为幅度-->\n            <waveform title=\"音频分析波形图\" :data_l=\"wave_data_l\" :data_r=\"wave_data_r\" :x=\"x\"\n                      v-if=\"radio === '1'\"></waveform>\n            <!--频谱图，横轴为频率，纵轴为幅度-->\n            <spectrogram title=\"音频分析频谱图\" :data=\"xfp\" :x=\"freq\" v-if=\"radio === '2'\"></spectrogram>\n          </el-card>\n        </div>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport Waveform from \"@/components/waveform\";\nimport Spectrogram from \"@/components/spectrogram\";\nimport {show_data} from '@/api/data'\n\nexport default {\n  name: 'Upload',\n  data() {\n    return {\n      // 文件上传列表\n      fileDict: {},\n      // 单选框\n      radio: '1',\n      // 文件信息\n      audio_parmas: [],\n      // 波形图\n      x: [],\n      wave_data_l: [],\n      wave_data_r: [],\n      // 频谱图\n      freq: [],\n      xfp: [],\n    };\n  },\n  components: {\n    \"waveform\": Waveform,\n    \"spectrogram\": Spectrogram,\n  },\n  methods: {\n    async get_data() {\n      let res = await show_data()\n      res = res['data']\n      // wav音频文件信息部分\n      this.audio_parmas = res['audio_params'];\n      // 波形图部分\n      this.wave_data_l = res['data'][0];\n      this.wave_data_r = res['data'][1];\n      this.x = res['time'];\n      // 频谱图部分\n      this.xfp = res['xfp'];\n      this.freq = res['freq'];\n    },\n    before_upload(file) {\n      const isMav = file.type === 'audio/x-wav' || file.type === 'audio/wav';\n      const isLt30M = file.size / 1024 / 1024 < 30;\n      const isNum = Object.keys(this.fileDict).length < 1;\n      if (!isMav) {\n        this.$message.error('上传文件只能是wav音频文件格式！');\n      } else if (!isLt30M) {\n        this.$message.error('最大上传30MB大小的文件！');\n      } else if (!isNum) {\n        this.$message.error(`最多上传 1 个文件`);\n      }\n      return isMav && isLt30M && isNum;\n    },\n    handle_remove(file) {\n      delete this.fileDict[`${file.name}`]\n    },\n    handle_success(file) {\n      this.fileDict[`${file.name}`] = file.name;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.home {\n  height: 100vh;\n  display: flex;\n}\n\n.el-header {\n  background-color: #b3c0d1;\n  color: #333333;\n  line-height: 50px;\n}\n\n.card {\n  width: 100%;\n}\n</style>\n"],"sourceRoot":"src/views"}]}